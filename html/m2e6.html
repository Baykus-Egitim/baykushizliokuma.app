<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Baykuş Hızlı Okuma</title>
  <!-- MDB icon -->
  <link rel="icon" href="/app/img/bho_yazısız.png">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/app/css/bootstrap.min.css">
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href="/app/css/mdb.min.css">
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href="/app/css/style.css">
  <!-- Google material icons -->
  <link href="/app/css/material-design/iconfont/material-icons.css" rel="stylesheet">

  <!-- jQuery -->
  <script type="text/javascript" src="/app/js/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="/app/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="/app/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="/app/js/mdb.min.js"></script>
  <!-- Timer.js -->
  <script src="/app/js/easytimer.js/dist/easytimer.js"></script>
  <!-- Anime.js -->
  <script src="/app/js/anime/lib/anime.min.js"></script>
  <!-- Async.js -->
  <script src="/app/js/async.min.js"></script>
  <!-- Lodash -->
  <script src="/app/js/lodash.min.js"></script>
  <!-- Hotkeys -->
  <script src="/app/js/hotkeys.min.js"></script>
  <!-- Common scripts -->
  <script src="/app/js/common.js"></script>
  <!-- Templates -->
  <script src="/app/js/navbar.js"></script>
  <script src="/app/js/modal.js"></script>

  <style>
    .grid {
      display: grid !important;
    }
  </style>

</head>

<body>

  <!-- Start your project here-->
  <div class="container-fluid" style="height: 100vh">
    <div id="playground" class="row h-100 w-100 nodisplay border mx-auto">
    </div>

    <div id="background" class="row d-flex justify-content-center h-100 align-items-center odisplay">
      <div id="logo" class="col-12 text-center ">
        <div id="frames" style="position: relative;">
          <img id="frame" class="visible" src="/app/img/bho_dunya_transparent.png" alt="" srcset="" style="opacity: 0.3;" height=450>
        </div>
      </div>
    </div>
  </div>
  <!-- End your project here-->



  <!-- Footer -->
  <footer class="page-footer font-small teal fixed-bottom odisplay">
    <div class="container-fluid h-100">
      <div class="row d-flex justify-content-between h-100 align-items-center">

        <!-- left -->
        <div class="col">
          <div class="row d-flex justify-content-between h-100 align-items-center">
            <nav aria-label="Page navigation example" style="margin-left: -0.5rem; margin-right: 1rem;">
              <ul class="pagination pagination-circle pg-blue my-1">
                <li class="page-item white-text">
                  <a class="page-link white-text" tabindex="-1">Hız:</a>
                </li>
                <li class="page-item active"><a class="speed page-link">1</a></li>
                <li class="page-item"><a class="speed page-link">2</a></li>
                <li class="page-item"><a class="speed page-link">3</a></li>
                <li class="page-item"><a class="speed page-link">4</a></li>
                <li class="page-item"><a class="speed page-link">5</a></li>
                <li class="page-item"><a class="speed page-link">6</a></li>
              </ul>
            </nav>

            <div class="col text-center">
            </div>

            <div class="col text-center">
            </div>

          </div>
        </div>

        <!-- center -->
        <div class="col-2 text-center">
          <button id="start" class="btn btn-outline-white btn-rounded waves-effect waves-light">Başla!</button>
        </div>

        <!-- right -->
        <div class="col">
          <div class="row d-flex justify-content-between h-100 align-items-center">
            <div class="col">
              <!-- <i class="fas fa-chart-line fa-2x"></i> -->
            </div>
            <div class="col nodisplay">
              <a href="#"> <i class="fas fa-chart-line fa-2x"></i></a>
            </div>
            <div class="col text-right">
              <img src="/app/img/bho_logo_yazı.png" alt="" srcset="" height=50>
            </div>
          </div>
        </div>

      </div>
    </div>
  </footer> <!-- Footer -->


  <script type="text/javascript">


    //==================================
    // generate view
    //==================================
    navbar(module)

    addStartModal2()
    addScoreModal2(false)
    $(document).ready(function () {
      $("#scoreModalIconCheck").removeClass("nodisplay")
    })

    duration = 750
    $(document).ready(function () {
      $('.speed').click(function () {
        speedLevel = Number($(this).text())
        if (speedLevel == 1) duration = 750
        else if (speedLevel == 2) duration = 600
        else if (speedLevel == 3) duration = 450
        else if (speedLevel == 4) duration = 300
        else if (speedLevel == 5) duration = 225
        else duration == 150
      });
    })



    var gridItemWidth = 60
    var gridItemHeight = 60
    var emptyGridItems = []
    var timeout = 10





    $(document).ready(function () {

      $("#start").click(function () {
        $("nav").addClass("animated fadeOutUp")
        $("footer").addClass("animated fadeOutDown")
        $("#frame").addClass("animated zoomOut")
        $(".btn").trigger("blur");

        // initialization
        function createGrid1() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          $("#playground").css("grid-template-columns", `${gridItemWidth}px auto ${gridItemWidth}px`)
          $("#playground").css("grid-template-rows", `${gridItemHeight}px auto ${gridItemHeight}px`)
          for (var i = 0; i < 3 * 3; ++i) {
            $("#playground").append(`<span class="text-center my-auto"></span>`)
            emptyGridItems.push(i)
          }
        }

        function createGrid2() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          $("#playground").css("grid-template-columns", `${gridItemWidth}px auto ${gridItemWidth}px auto ${gridItemWidth}px`)
          $("#playground").css("grid-template-rows", `${gridItemHeight}px auto ${gridItemHeight}px auto ${gridItemHeight}px`)
          for (var i = 0; i < 5 * 5; ++i) {
            $("#playground").append(`<span class="text-center my-auto"></span>`)
            emptyGridItems.push(i)
          }
        }

        var createGrid3 = createGrid1
        var createGrid4 = createGrid1
        var createGrid5 = createGrid2

        // initialization
        function createGrid6() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          $("#playground").css("grid-template-columns", `repeat(${Ncols}, ${gridItemWidth}px)`)
          $("#playground").css("grid-template-rows", `${gridItemHeight}px auto ${gridItemHeight}px`)
          for (var i = 0; i < 3 * Ncols; ++i) {
            $("#playground").append(`<span class="text-center my-auto"></span>`)
            emptyGridItems.push(i)
          }
        }

        function createGrid7() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          $("#playground").css("grid-template-columns", `${gridItemWidth}px auto ${gridItemWidth}px`)
          $("#playground").css("grid-template-rows", `repeat(${Nrows}, ${gridItemHeight}px)`)
          for (var i = 0; i < 3 * Nrows; ++i) {
            $("#playground").append(`<span class="text-center my-auto"></span>`)
            emptyGridItems.push(i)
          }
        }

        function createGrid8() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          var gridItemWidth2 = gridItemWidth;
          var gridItemHeight2 = gridItemHeight;
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          if (Nrows > Ncols) { Nrows = Ncols; gridItemHeight2 = gridItemHeight * $("#playground").height() / $("#playground").width() }
          else { Ncols = Nrows; gridItemWidth2 = gridItemWidth * $("#playground").width() / $("#playground").height() }
          $("#playground").css("grid-template-columns", `repeat(${Ncols}, ${gridItemWidth2}px)`)
          $("#playground").css("grid-template-rows", `repeat(${Nrows}, ${gridItemHeight2}px)`)
          for (var i = 0; i < Ncols * Nrows; ++i) {
            if (i < Math.floor(Ncols * Nrows / 2)) $("#playground").append(`<span class="ml-1 mr-auto mt-1 mb-auto"></span>`)
            else $("#playground").append(`<span class="ml-auto mt-auto mr-1 mb-1"></span>`)
            emptyGridItems.push(i)
          }
        }

        function createGrid9() {
          emptyGridItems = []
          $("#playground").addClass("grid")
          $("#playground").empty()
          var gridItemWidth2 = gridItemWidth;
          var gridItemHeight2 = gridItemHeight;
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          if (Nrows > Ncols) { Nrows = Ncols; gridItemHeight2 = gridItemHeight * $("#playground").height() / $("#playground").width() }
          else { Ncols = Nrows; gridItemWidth2 = gridItemWidth * $("#playground").width() / $("#playground").height() }
          $("#playground").css("grid-template-columns", `repeat(${Ncols}, ${gridItemWidth2}px)`)
          $("#playground").css("grid-template-rows", `repeat(${Nrows}, ${gridItemHeight2}px)`)
          for (var i = 0; i < Ncols * Nrows; ++i) {
            if (i < Math.floor(Ncols * Nrows / 2)) $("#playground").append(`<span class="mr-1 ml-auto mt-1 mb-auto"></span>`)
            else $("#playground").append(`<span class="ml-1 mt-auto mr-auto mb-1"></span>`)
            emptyGridItems.push(i)
          }
        }

        // var createGrid9 = createGrid8

        function animate1() {
          async.series(
            [
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(6)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(8)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(2)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(0)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
            ],
            function (err, results) {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          );

        }

        function animate2() {
          async.series(
            [
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(20)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(22)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(24)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(14)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(4)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(2)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(0)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(10)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
            ],
            function (err, results) {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          );
        }

        function animate3() {
          async.series(
            [
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(0)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(2)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(6)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(8)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
            ],
            function (err, results) {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          );
        }

        function animate4() {
          async.series(
            [
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(0)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(6)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(2)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(8)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
            ],
            function (err, results) {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          );
        }

        function animate5() {
          async.series(
            [
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(20)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(0)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(12)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(24)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(4)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },
              function (callback) {
                $(`#playground > span`).html("")
                if (isFinished) callback(0)
                else {
                  var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                  $(`#playground > span:eq(12)`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                  setTimeout(callback, duration)
                }
              },

            ],
            function (err, results) {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          );
        }

        function animate6() {
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          var cols = _.range(0, Ncols)
          async.eachSeries(cols,
            (i, callback) => {
              async.series([
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${i})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${i + 2 * Ncols})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
              ],
                (err, result) => {
                  if (isFinished) callback(0)
                  else callback(null)
                })
            },
            (err) => {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          )
        }

        function animate7() {
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          async.eachSeries(_.range(0, Nrows),
            (i, callback) => {
              async.series([
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${i * 3})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${i * 3 + 2})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
              ],
                (err, result) => {
                  if (isFinished) callback(0)
                  else callback(null)
                })
            },
            (err) => {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          )
        }

        function animate8() {
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          if (Nrows > Ncols) { Nrows = Ncols; }
          else { Ncols = Nrows; }
          async.eachSeries(_.range(0, Math.floor(Ncols / 2)),
            (i, callback) => {
              async.series([
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var ii = Math.floor(Ncols / 2) - 1 - i
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${ii + ii * Ncols})`).html(`<i class="fas fa-${emoji} fa-3x ml-1 mt-1" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var ii = Math.floor(Ncols / 2) - 1 - i
                    j = Ncols - 1 - ii
                    $(`#playground > span`).html("")
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${j + j * Ncols})`).html(`<i class="fas fa-${emoji} fa-3x mr-1 mb-1" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
              ],
                (err, result) => {
                  if (isFinished) callback(0)
                  else callback(null)
                })
            },
            (err) => {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          )
        }


        function animate9() {
          var Ncols = Math.floor($("#playground").width() / gridItemWidth)
          var Nrows = Math.floor($("#playground").height() / gridItemHeight)
          if (Nrows > Ncols) { Nrows = Ncols; }
          else { Ncols = Nrows; }
          async.eachSeries(_.range(0, Math.floor(Ncols / 2)),
            (i, callback) => {
              async.series([
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var ii = Math.floor(Ncols / 2) - 1 - i
                    var ip = Ncols - 1 - 2 * ii
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${ii + ii * Ncols + ip})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
                function (callback) {
                  $(`#playground > span`).html("")
                  if (isFinished) callback(0)
                  else {
                    var ii = Math.floor(Ncols / 2) - 1 - i
                    var ip = Ncols - 1 - 2 * ii
                    j = Ncols - 1 - ii
                    $(`#playground > span`).html("")
                    var emoji = emojis[Math.floor(Math.random() * emojis.length)]
                    $(`#playground > span:eq(${j + j * Ncols - ip})`).html(`<i class="fas fa-${emoji} fa-3x" style="color: darkgreen"></i>`)
                    setTimeout(callback, duration)
                  }
                },
              ],
                (err, result) => {
                  if (isFinished) callback(0)
                  else callback(null)
                })
            },
            (err) => {
              if (isFinished) {
                clearInterval(interval)
              }
            }
          )
        }

        function loop() {
          async.series(
            [
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid1()
                  isFinished = false
                  animate1()
                  interval = setInterval(() => { animate1() }, 4 * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid2()
                  isFinished = false
                  animate2()
                  interval = setInterval(() => { animate2() }, 8 * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid3()
                  isFinished = false
                  animate3()
                  interval = setInterval(() => { animate3() }, 4 * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid4()
                  isFinished = false
                  animate4()
                  interval = setInterval(() => { animate4() }, 4 * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid5()
                  isFinished = false
                  animate5()
                  interval = setInterval(() => { animate5() }, 6 * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid6()
                  isFinished = false
                  var Ncols = Math.floor($("#playground").width() / gridItemWidth)
                  animate6()
                  interval = setInterval(() => { animate6() }, 2 * Ncols * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid7()
                  isFinished = false
                  var Nrows = Math.floor($("#playground").height() / gridItemHeight)
                  animate7()
                  interval = setInterval(() => { animate7() }, 2 * Nrows * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid8()
                  isFinished = false
                  var Ncols = Math.floor($("#playground").width() / gridItemWidth)
                  var Nrows = Math.floor($("#playground").height() / gridItemHeight)
                  if (Nrows > Ncols) { Nrows = Ncols; }
                  else { Ncols = Nrows; }
                  animate8()
                  interval = setInterval(() => { animate8() }, 2 * Math.floor(Ncols / 2) * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },
              function (callback) {
                if (isFinished2) callback(1)
                else {
                  createGrid9()
                  isFinished = false
                  var Ncols = Math.floor($("#playground").width() / gridItemWidth)
                  var Nrows = Math.floor($("#playground").height() / gridItemHeight)
                  if (Nrows > Ncols) { Nrows = Ncols; }
                  else { Ncols = Nrows; }
                  animate9()
                  interval = setInterval(() => { animate9() }, 2 * Math.floor(Ncols / 2) * duration);
                  var timer = new easytimer.Timer();
                  timer.start({ precision: 'seconds', countdown: true, startValues: { seconds: timeout } });
                  // toastr["info"]("0");
                  timer.addEventListener('secondsUpdated', function (e) {
                    // $('.md-toast-message').html(timer.getTimeValues().seconds);
                  });
                  timer.addEventListener('targetAchieved', function (e) {
                    isFinished = true
                    // toastr.clear()
                    setTimeout(callback, duration)
                  });
                }
              },

            ],
            function (err, results) {
              console.log("Finished")
              if (!isFinished2) stopCallback()
            }
          );
        }

        setTimeout(() => {
          $("#playground").removeClass("nodisplay")
        }, 500);
        setTimeout(() => {
          // prepare
          iteration = 0
          i = 0

          // stopper
          stopCallback = null
          isFinished2 = null

          // esc
          hotkeys.unbind('esc');
          hotkeys('esc', function (event, handler) {
            switch (handler.key) {
              case 'esc':
                isFinished = true
                stopCallback("Finish")
                break;
              default: null;
            }
          });

          async.series([

            function (callback) {
              stopCallback = callback
              if (!isFirstRun) setTimeout(callback, 500)
              else {
                $("#startModalCountdown").text(10)
                let timer2 = new easytimer.Timer();
               timer2.start({ precision: 'seconds', countdown: true, startValues: { seconds: 10 } });
                timer2.addEventListener('secondsUpdated', function (e) {
                  $("#startModalCountdown").text(timer2.getTimeValues().seconds);
                });
                timer2.addEventListener('targetAchieved', function (e) {
                  $("#startModal").modal("hide")
                });
                $("#startModal").modal("show")
                $('#startModal').off('hidden.bs.modal')
                $('#startModal').on('hidden.bs.modal', function (e) {
                  setTimeout(callback, 500)
                  timer2.stop()
                });
              }
            },
            function (callback) {
              stopCallback = callback
              setTimeout(loop,500)
            },

          ],
            function (err) {
              clearInterval(interval)
              isFinished = true
              if (!err) {
                isFirstRun = false
                let date = new Date()
                $.post(`/app/stats`,
                  {
                    exercise: exerciseId,
                    date: date.toLocaleDateString("tr-TR").split(".").join("/"),
                    speedLevel: speedLevel,
                  },
                  res => {
                    updateScoreTable()
                  })
                $("#scoreModal").modal("show")
              }
              timer.stop()
              toastr.clear()
              atTheEnd()
            }
          )

        }, 1000);
      })

      function atTheEnd() {
        $("#playground").removeClass("grid")
        $("#playground").addClass("nodisplay")
        $("#playground").empty()

        $("nav").removeClass("animated fadeOutUp")
        $("footer").removeClass("animated fadeOutDown")
        $("nav").addClass("animated fadeInDown")
        $("footer").addClass("animated fadeInUp")
        $("#frame").removeClass("animated zoomOut")
        $("#frame").addClass("animated zoomIn")
      }

    })

  </script>

</body>

</html>